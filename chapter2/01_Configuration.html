<!DOCTYPE HTML>
<html lang="zh-tw" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>配置文件 | Macula Reference</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.6">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../chapter2/02_Domain.html" />
    
    
    <link rel="prev" href="../chapter2/chapter2.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="2.1"
        data-chapter-title="配置文件"
        data-filepath="chapter2/01_Configuration.md"
        data-basepath=".."
        data-revision="Fri Jan 29 2016 09:35:41 GMT+0800 (CST)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
                
                <li>
                    <a href="http://macula.top" target="blank" class="custom-link">Macula Platform</a>
                </li>
            
            

            
            <li class="divider"></li>
            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        序言
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="chapter1/chapter1.html">
            
                
                    <a href="../chapter1/chapter1.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Macula介绍
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="chapter1/01_Introduction.html">
            
                
                    <a href="../chapter1/01_Introduction.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        概述
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="chapter1/02_Quick_Start.html">
            
                
                    <a href="../chapter1/02_Quick_Start.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        快速开始
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="chapter1/03_Project_Building.html">
            
                
                    <a href="../chapter1/03_Project_Building.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        项目构建
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="chapter2/chapter2.html">
            
                
                    <a href="../chapter2/chapter2.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        核心技术
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="2.1" data-path="chapter2/01_Configuration.html">
            
                
                    <a href="../chapter2/01_Configuration.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        配置文件
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="chapter2/02_Domain.html">
            
                
                    <a href="../chapter2/02_Domain.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        领域模型层
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="chapter2/03_Repository.html">
            
                
                    <a href="../chapter2/03_Repository.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        数据存取层
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="chapter2/04_Service.html">
            
                
                    <a href="../chapter2/04_Service.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        业务服务层
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="chapter2/05_Controller.html">
            
                
                    <a href="../chapter2/05_Controller.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.</b>
                        
                        展示层
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="chapter2/06_Timezone.html">
            
                
                    <a href="../chapter2/06_Timezone.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.6.</b>
                        
                        时间与格式
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="chapter2/07_Exception.html">
            
                
                    <a href="../chapter2/07_Exception.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.7.</b>
                        
                        异常处理
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.8" data-path="chapter2/08_Cache.html">
            
                
                    <a href="../chapter2/08_Cache.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.8.</b>
                        
                        缓存服务
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.9" data-path="chapter2/09_JUnit.html">
            
                
                    <a href="../chapter2/09_JUnit.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.9.</b>
                        
                        单元测试
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.10" data-path="chapter2/10_OpenApi.html">
            
                
                    <a href="../chapter2/10_OpenApi.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.10.</b>
                        
                        开放API
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="chapter3/chapter3.html">
            
                
                    <a href="../chapter3/chapter3.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        基础插件
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="chapter3/01_Plugins-Infrastructure.html">
            
                
                    <a href="../chapter3/01_Plugins-Infrastructure.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        基础设施
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="chapter3/02_Plugins_Data.html">
            
                
                    <a href="../chapter3/02_Plugins_Data.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        数据提供
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="chapter3/03_Plugins_DataSet.html">
            
                
                    <a href="../chapter3/03_Plugins_DataSet.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        数据集
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="chapter3/04_Plugins_Security.html">
            
                
                    <a href="../chapter3/04_Plugins_Security.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        权限管理
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="chapter4/chapter4.html">
            
                
                    <a href="../chapter4/chapter4.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        扩展插件
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" >
            
            <span><b>4.1.</b> 登录与主界面</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" >
            
            <span><b>4.2.</b> 后台管理</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" >
            
            <span><b>4.3.</b> 表单与查询</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.4" >
            
            <span><b>4.4.</b> Dubbo</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.5" >
            
            <span><b>4.5.</b> ESB Client</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.6" >
            
            <span><b>4.6.</b> 系统集成</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.7" >
            
            <span><b>4.7.</b> 系统监控</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="chapter5/chapter5.html">
            
                
                    <a href="../chapter5/chapter5.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        技术标准
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="chapter5/01_Standard_Code.html">
            
                
                    <a href="../chapter5/01_Standard_Code.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        Java代码规范
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="chapter5/02_Standard_Check.html">
            
                
                    <a href="../chapter5/02_Standard_Check.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        代码审计规范
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="chapter5/03_Standard_JUnit.html">
            
                
                    <a href="../chapter5/03_Standard_JUnit.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                        单元测试标准
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="chapter5/04_Standard_Library.html">
            
                
                    <a href="../chapter5/04_Standard_Library.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.</b>
                        
                        第三方包使用标准
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="chapter5/05_Standard_Import.html">
            
                
                    <a href="../chapter5/05_Standard_Import.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.5.</b>
                        
                        新技术引入标准
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="chapter6/chapter6.html">
            
                
                    <a href="../chapter6/chapter6.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        附录
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="chapter6/01_Tables.html">
            
                
                    <a href="../chapter6/01_Tables.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        表结构
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="chapter6/Upgrade.html">
            
                
                    <a href="../chapter6/Upgrade.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        版本变更说明
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    本書使用 GitBook 釋出
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Macula Reference</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="&#x914D;&#x7F6E;&#x6587;&#x4EF6;">&#x914D;&#x7F6E;&#x6587;&#x4EF6;</h1>
<p>&#x57FA;&#x4E8E;Macula&#x5F00;&#x53D1;&#x7684;&#x9879;&#x76EE;&#xFF0C;&#x6D89;&#x53CA;&#x5230;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x6709;&#xFF1A;</p>
<ul>
<li>Macula&#x914D;&#x7F6E;</li>
<li>Spring&#x914D;&#x7F6E;</li>
<li>JPA&#x914D;&#x7F6E;</li>
<li>Freemarker&#x914D;&#x7F6E;</li>
<li>Log4J&#x914D;&#x7F6E;</li>
</ul>
<h3 id="macula&#x914D;&#x7F6E;">Macula&#x914D;&#x7F6E;</h3>
<ol>
<li><p><strong>macula.properties</strong></p>
<p>Macula&#x914D;&#x7F6E;&#x6587;&#x4EF6; macula.properties&#x4F4D;&#x4E8E;Maven&#x9879;&#x76EE;&#x7684;src/main/resources&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x5B9E;&#x73B0;macula&#x5E73;&#x53F0;&#x81EA;&#x8EAB;&#x7684;&#x53EF;&#x914D;&#x7F6E;&#x4FE1;&#x606F;&#x3002;</p>
<p><strong>&#x8868; 4.1. macula.properties&#x53EF;&#x914D;&#x7F6E;&#x5C5E;&#x6027;</strong></p>
<table summary="macula.properties&#x53EF;&#x914D;&#x7F6E;&#x5C5E;&#x6027;" border="1">
    <colgroup>
        <col>
        <col>
        <col>
        <col>
    </colgroup>
    <thead>
        <tr>
            <th>&#x5C5E;&#x6027;&#x540D;&#x79F0;</th>
            <th>&#x8BF4;&#x660E;</th>
            <th>&#x6570;&#x636E;&#x7C7B;&#x578B;</th>
            <th>&#x9ED8;&#x8BA4;&#x503C;</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>macula.appGroup</td>
            <td>&#x5E94;&#x7528;&#x7684;&#x5206;&#x7EC4;&#xFF0C;&#x5982;&#x53EF;&#x8BBE;&#x7F6E;&#x4E3A;sample</td>
            <td>String</td>
            <td>&#x65E0;</td>
        </tr>
        <tr>
            <td>macula.appName</td>
            <td>&#x5E94;&#x7528;&#x7684;&#x540D;&#x79F0;&#xFF0C;&#x5982;&#x53EF;&#x8BBE;&#x7F6E;&#x4E3A;sample</td>
            <td>String</td>
            <td>&#x65E0;</td>
        </tr>
        <tr>
            <td>macula.casServerService</td>
            <td>CAS&#x670D;&#x52A1;&#x5730;&#x5740;&#xFF0C;&#x5982;&#xFF1A;https://cas.infinitus.com.cn</td>
            <td>String</td>
            <td>&#x65E0;</td>
        </tr>
        <tr>
            <td>macula.casClientService</td>
            <td>CAS&#x5E94;&#x7528;&#x9A8C;&#x8BC1;&#x5730;&#x5740;&#xFF0C;&#x5982;&#xFF1A;https://sample.infinitus.com.cn</td>
            <td>String</td>
            <td>&#x65E0;</td>
        </tr>
        <tr>
            <td>macula.resourceCachePeriod</td>
            <td>&#x9759;&#x6001;&#x8D44;&#x6E90;&#x6587;&#x4EF6;&#x7684;&#x7F13;&#x5B58;&#x65F6;&#x95F4;&#xFF0C;&#x4EE5;&#x79D2;&#x4E3A;&#x5355;&#x4F4D;</td>
            <td>int</td>
            <td>0</td>
        </tr>
        <tr>
            <td>jpa.showSql</td>
            <td>JPA&#x662F;&#x5426;&#x663E;&#x793A;SQL&#x8BED;&#x53E5;</td>
            <td>Boolean</td>
            <td>false</td>
        </tr>
        <tr>
            <td>jpa.generateDdl</td>
            <td>JPA&#x662F;&#x5426;&#x81EA;&#x52A8;&#x66F4;&#x65B0;&#x6570;&#x636E;&#x5E93;&#x8868;&#x7ED3;&#x6784;</td>
            <td>Boolean</td>
            <td>false</td>
        </tr>
        <tr>
            <td>macula.resourceCachePeriod</td>
            <td>&#x9759;&#x6001;&#x6587;&#x4EF6;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x7F13;&#x5B58;&#x65F6;&#x95F4;&#xFF0C;&#x5355;&#x4F4D;&#x6BEB;&#x79D2;</td>
            <td>int</td>
            <td>0</td>
        </tr>
        <tr>
            <td>macula.actionAsRole</td>
            <td>&#x529F;&#x80FD;&#x662F;&#x5426;&#x4F5C;&#x4E3A;&#x89D2;&#x8272;&#xFF0C;&#x5982;&#x679C;&#x542F;&#x7528;&#x8BE5;&#x53C2;&#x6570;&#xFF0C;&#x5219;&#x5BF9;Action&#x5BF9;&#x5E94;&#x7684;&#x89D2;&#x8272;&#x8BBF;&#x95EE;&#x4E2D;&#x5C06;&#x81EA;&#x52A8;&#x52A0;&#x5165;&#x89D2;&#x8272;&#xFF1A;R$_+ Action&#x7F16;&#x53F7;</td>
            <td>Boolean</td>
            <td>false</td>
        </tr>
        <tr>
            <td>macula.maximumSessions</td>
            <td>&#x7528;&#x6237;&#x662F;&#x5426;&#x5141;&#x8BB8;&#x540C;&#x65F6;&#x591A;Session&#x5728;&#x7EBF;&#xFF0C;&#x4E00;&#x822C;&#x8BBE;&#x7F6E;&#x4E3A;1&#xFF0C;&#x8868;&#x793A;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#x5728;&#x540C;&#x4E00;&#x65F6;&#x95F4;&#xFF0C;&#x53EA;&#x5141;&#x8BB8;&#x4E00;&#x4E2A;&#x6709;&#x6548;session&#x767B;&#x5F55;</td>
            <td>int</td>
            <td>&#x5FC5;&#x987B;&#x8BBE;&#x7F6E;&#xFF0C;&#x4E00;&#x822C;&#x4E3A;1</td>
        </tr>
        <tr>
            <td>macula.captchaFailedTimes</td>
            <td>&#x5728;&#x7528;&#x6237;&#x767B;&#x9646;&#x65F6;&#xFF0C;&#x8F93;&#x9519;&#x591A;&#x5C11;&#x6B21;&#x5BC6;&#x7801;&#x540E;&#x624D;&#x51FA;&#x73B0;&#x9A8C;&#x8BC1;&#x7801;&#xFF0C;&#x4E00;&#x822C;&#x8BBE;&#x7F6E;&#x4E3A;0&#xFF0C;&#x8868;&#x793A;&#x6BCF;&#x6B21;&#x90FD;&#x51FA;&#x73B0;&#x9A8C;&#x8BC1;&#x7801;</td>
            <td>int</td>
            <td>&#x5FC5;&#x987B;&#x8BBE;&#x7F6E;&#xFF0C;&#x4E00;&#x822C;&#x4E3A;0</td>
        </tr>
        <tr>
            <td>macula.sessionTime</td>
            <td>&#x7528;&#x6237;&#x7684;RememberMe&#x7684;&#x6709;&#x6548;&#x65F6;&#x957F;&#xFF0C;&#x5355;&#x4F4D;&#x662F;&#x79D2;</td>
            <td>int</td>
            <td>&#x5FC5;&#x987B;&#x8BBE;&#x7F6E;&#xFF0C;&#x4E00;&#x822C;&#x4E3A;1800</td>
        </tr>
        <tr>
            <td>macula.runMode</td>
            <td>Macula&#x7684;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#xFF0C;&#x6709;dev&#xFF0C;test&#xFF0C;prd&#xFF0C;&#x4EC5;&#x4E3A;&#x533A;&#x5206;&#xFF0C;&#x6682;&#x65F6;&#x65E0;&#x7528;</td>
            <td>&#xA0;</td>
            <td>&#x5FC5;&#x987B;&#x8BBE;&#x7F6E;</td>
        </tr>
        <tr>
            <td>pattern.datetime</td>
            <td>Freemarker&#x7684;&#x65E5;&#x671F;&#x65F6;&#x95F4;&#x8F93;&#x51FA;&#x683C;&#x5F0F;</td>
            <td>&#xA0;</td>
            <td>&#x5FC5;&#x987B;&#x8BBE;&#x7F6E;&#xFF0C;&#x5982;yyyy-MM-dd HH:mm:ss</td>
        </tr>
        <tr>
            <td>pattern.date</td>
            <td>Freemarker&#x7684;&#x65E5;&#x671F;&#x8F93;&#x51FA;&#x683C;&#x5F0F;</td>
            <td>&#xA0;</td>
            <td>&#x5FC5;&#x987B;&#x8BBE;&#x7F6E;&#xFF0C;&#x5982;yyyy-MM-dd</td>
        </tr>
        <tr>
            <td>pattern.time</td>
            <td>Freemarker&#x7684;&#x65F6;&#x95F4;&#x8F93;&#x51FA;&#x683C;&#x5F0F;</td>
            <td>&#xA0;</td>
            <td>&#x5FC5;&#x987B;&#x8BBE;&#x7F6E;&#xFF0C;&#x5982;HH:mm:ss</td>
        </tr>
        <tr>
            <td>pattern.number</td>
            <td>Freemarker&#x7684;&#x6570;&#x5B57;&#x8F93;&#x51FA;&#x683C;&#x5F0F;</td>
            <td>&#xA0;</td>
            <td>&#x5FC5;&#x987B;&#x8BBE;&#x7F6E;&#xFF0C;&#x5982;#</td>
        </tr>
        <tr>
            <td>macula.protectedUrlPattern</td>
            <td>&#x8BBE;&#x7F6E;&#x8BBF;&#x95EE;&#x7684;&#x5730;&#x5740;&#x5728;&#x6CA1;&#x6709;Action&#x5BF9;&#x5E94;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x5339;&#x914D;&#x8BE5;&#x8DEF;&#x5F84;&#xFF0C;&#x5219;&#x4F7F;&#x7528;macula.protectedUrlRole&#x914D;&#x7F6E;&#x7684;&#x89D2;&#x8272;&#x7F16;&#x7801;&#x4F5C;&#x4E3A;&#x5FC5;&#x987B;&#x5177;&#x5907;&#x7684;&#x8BBF;&#x95EE;&#x89D2;&#x8272;</td>
            <td>String</td>
            <td>null</td>
        </tr>
        <tr>
            <td>macula.protectedUrlRole</td>
            <td>&#x8BF4;&#x660E;&#x5982;&#x4E0A;&#xFF0C;&#x4E0E;macula.protectedUrlPattern&#x914D;&#x5408;&#x4F7F;&#x7528;</td>
            <td>String</td>
            <td>ROLE_PROTECTED</td>
        </tr>
    </tbody>
</table>

<p><strong><em>&#x63D0;&#x793A;</em></strong></p>
<p><em>&#x53EA;&#x6709;war&#x578B;&#x7684;&#x6A21;&#x5757;&#x624D;&#x53EF;&#x80FD;&#x9700;&#x8981;macula.properties&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x653E;&#x5728;&#x5728;src/main/resources&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x4EE5;&#x5B9E;&#x73B0;&#x8FD0;&#x884C;&#x671F;&#x80FD;&#x901A;&#x8FC7;classpath:/macula.properties&#x8BBF;&#x95EE;&#x3002;
&#x5BF9;&#x4E8E;&#x975E;war&#x7684;jar&#x578B;&#x6A21;&#x5757;&#xFF0C;&#x4F9D;&#x636E;&#x6240;&#x9700;&#x7684;&#x60C5;&#x51B5;&#x5B9A;&#x5236;&#xFF0C;&#x7EDD;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;macula.properties&#x6587;&#x4EF6;&#x4E0D;&#x662F;&#x5FC5;&#x987B;&#x7684;&#xFF0C;&#x66F4;&#x591A;&#x7684;&#x4F7F;&#x7528;&#x5728;&#x6D4B;&#x8BD5;&#x573A;&#x5408;&#xFF0C;&#x6B64;&#x65F6;&#xFF0C;&#x53EF;&#x5C06;macula.properties&#x653E;&#x7F6E;&#x5728;src/test/resources&#x4E0B;&#xFF0C;&#x4F7F;&#x8BE5;&#x914D;&#x7F6E;&#x5728;&#x6D4B;&#x8BD5;&#x5468;&#x671F;&#x4E0B;&#x53EF;&#x7528;&#x3002;</em></p>
</li>
<li><p>&#x901A;&#x8FC7;Bean&#x4FEE;&#x6539;Configuration</p>
<p> &#x5E94;&#x7528;&#x52A0;&#x8F7D;&#x65F6;&#xFF0C;&#x5C06;&#x901A;&#x8FC7;&#x626B;&#x63CF;classpath&#x8DEF;&#x5F84;&#xFF1A;org.macula.core.config&#x76EE;&#x5F55;&#xFF0C;&#x5E76;&#x5B9E;&#x73B0;&#x4E86;ConfigurationProvider&#x63A5;&#x53E3;&#x7684;Bean&#xFF0C;&#x6765;&#x4FEE;&#x6539;Configuration&#x4FE1;&#x606F;&#x3002;</p>
<p> &#x5982;org.macula.core.config.PropertyConfigurationProvider&#x5C31;&#x662F;&#x901A;&#x8FC7;&#x8BFB;&#x53D6;macula.properties&#x6765;&#x8BFB;&#x53D6;macula&#x5E73;&#x53F0;Configuration&#x4FE1;&#x606F;&#x7684;&#x5904;&#x7406;&#xFF08;&#x5373;&#x4E0A;&#x4E00;&#x8282;&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#xFF09;&#x3002;</p>
</li>
</ol>
<h3 id="spring&#x914D;&#x7F6E;">Spring&#x914D;&#x7F6E;</h3>
<p>Macula&#x5F00;&#x53D1;&#x5E73;&#x53F0;&#x57FA;&#x4E8E;Spring&#x6846;&#x67B6;&#x5F00;&#x53D1;&#xFF0C;&#x4F7F;&#x7528;&#x8005;&#x9700;&#x8981;&#x4E86;&#x89E3;Spring&#x7684;&#x57FA;&#x672C;&#x539F;&#x7406;&#x4EE5;&#x53CA;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#xFF08;&#x53C2;&#x89C1;&#x9644;&#x5F55;Spring Framework&#xFF09;&#xFF0C;&#x672C;&#x7AE0;&#x4ECB;&#x7ECD;&#x5728;Macula&#x5F00;&#x53D1;&#x5E73;&#x53F0;&#x4E2D;&#xFF0C;&#x6240;&#x9700;&#x8981;&#x914D;&#x7F6E;/&#x4FEE;&#x6539;&#x7684;Spring&#x76F8;&#x5173;&#x914D;&#x7F6E;&#x4FE1;&#x606F;&#x3002;</p>
<ol>
<li><p>J2EE&#x9879;&#x76EE;&#x4E0B;&#xFF0C;web.xml&#x4E2D;&#x7684;Spring&#x901A;&#x8FC7;Listener&#x8F7D;&#x5165;</p>
<pre><code class="lang-xml"> <span class="hljs-tag">&lt;<span class="hljs-title">listener</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-title">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="hljs-tag">&lt;/<span class="hljs-title">listener-class</span>&gt;</span>
 <span class="hljs-tag">&lt;/<span class="hljs-title">listener</span>&gt;</span>
</code></pre>
</li>
<li><p>Listener&#x9700;&#x8981;&#x8BBE;&#x7F6E;&#x7684;&#x53C2;&#x6570;</p>
<pre><code class="lang-xml"> <span class="hljs-tag">&lt;<span class="hljs-title">context-param</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-title">param-name</span>&gt;</span>locatorFactorySelector<span class="hljs-tag">&lt;/<span class="hljs-title">param-name</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-title">param-value</span>&gt;</span>classpath:/configs/applicationContext-ref.xml<span class="hljs-tag">&lt;/<span class="hljs-title">param-value</span>&gt;</span>
 <span class="hljs-tag">&lt;/<span class="hljs-title">context-param</span>&gt;</span>

 <span class="hljs-tag">&lt;<span class="hljs-title">context-param</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-title">param-name</span>&gt;</span>parentContextKey<span class="hljs-tag">&lt;/<span class="hljs-title">param-name</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-title">param-value</span>&gt;</span>MaculaContextRoot<span class="hljs-tag">&lt;/<span class="hljs-title">param-value</span>&gt;</span>
 <span class="hljs-tag">&lt;/<span class="hljs-title">context-param</span>&gt;</span>

 <span class="hljs-tag">&lt;<span class="hljs-title">context-param</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-title">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-title">param-name</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-title">param-value</span>&gt;</span>classpath:/configs/applicationContext-app.xml,classpath:/configs/applicationContext-macula.xml<span class="hljs-tag">&lt;/<span class="hljs-title">param-value</span>&gt;</span>

 <span class="hljs-tag">&lt;/<span class="hljs-title">context-param</span>&gt;</span>
</code></pre>
<p> <strong><em>&#x91CD;&#x8981;</em></strong></p>
<p> <em>&#x5E94;&#x7528;&#x7CFB;&#x7EDF;&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;&#x901A;&#x8FC7;web.xml&#x8BBE;&#x7F6E;&#x7684;Spring&#x52A0;&#x8F7D;&#x7684;&#x53C2;&#x6570;&#x503C;&#xFF0C;&#x5FC5;&#x987B;&#x6309;&#x7167;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x6267;&#x884C;&#xFF0C;&#x5373;&#xFF1A;&#x6587;&#x4EF6;&#x540D;&#x3001;&#x76EE;&#x5F55;&#x540D;&#x5FC5;&#x987B;&#x6309;&#x6307;&#x5B9A;&#x7684;&#x4EE3;&#x7801;&#x5B9A;&#x4E49;&#x3002;</em></p>
</li>
<li><p>configs/applicationContext-ref.xml</p>
<pre><code class="lang-xml"> <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">&quot;MaculaContextRoot&quot;</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">&quot;org.springframework.context.support.ClassPathXmlApplicationContext&quot;</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-title">constructor-arg</span> <span class="hljs-attribute">index</span>=<span class="hljs-value">&quot;0&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;classpath:applicationContext-root.xml&quot;</span> /&gt;</span>
 <span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span>
</code></pre>
<p> <strong><em>&#x91CD;&#x8981;</em></strong></p>
<p> <em>&#x5BF9;&#x4E8E;&#x8BE5;&#x6587;&#x4EF6;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x5FC5;&#x987B;&#x4E0E;&#x4E0A;&#x8FF0;&#x6307;&#x5B9A;&#x4EE3;&#x7801;&#x5185;&#x5BB9;&#x4E00;&#x81F4;</em></p>
</li>
<li><p>applicationContext-root.xml</p>
<p> &#x8BE5;&#x6587;&#x4EF6;&#x653E;&#x7F6E;&#x8DEF;&#x5F84;&#x4E0E;applicationContext-ref.xml&#x4E2D;&#x914D;&#x7F6E;&#x7684;classpath:applicationContext-root.xml&#x4E00;&#x81F4;&#xFF0C;&#x5373;&#x5FC5;&#x987B;&#x653E;&#x5728;src/main/resources&#x76EE;&#x5F55;&#x3002;</p>
<p> &#x5E94;&#x7528;&#x7CFB;&#x7EDF;&#x6240;&#x4F7F;&#x7528;&#x7684;&#x6570;&#x636E;&#x5E93;&#x8BBE;&#x7F6E;&#x5FC5;&#x987B;&#x5728;&#x6B64;&#x6587;&#x4EF6;&#x4E2D;&#x5B9A;&#x4E49;&#x3002;&#x4E0B;&#x9762;&#x662F;&#x53C2;&#x8003;&#x7684;&#x4EE3;&#x7801;&#x4FE1;&#x606F;&#xFF1A;</p>
<pre><code class="lang-xml">     <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">&quot;dataSource&quot;</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span>

     <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&quot;url&quot;</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>jdbc:oracle:thin:@192.168.0.180:1521:dstest<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>

     <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&quot;driverClassName&quot;</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>oracle.jdbc.driver.OracleDriver<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>

     <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&quot;username&quot;</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>macula<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>

     <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&quot;password&quot;</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>macula<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>

 <span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span>
</code></pre>
<p> &#x540C;&#x65F6;&#xFF0C;&#x8BE5;&#x6587;&#x4EF6;&#x4E5F;&#x662F;&#x5B9A;&#x4E49;&#x914D;&#x7F6E;&#x4FE1;&#x606F;&#xFF08;&#x5373;Macula&#x5E73;&#x53F0;&#x7684;Configuration&#x4FE1;&#x606F;&#x7684;&#x4FEE;&#x6539;Bean&#xFF09;&#x8BFB;&#x53D6;&#x7684;&#x8BBE;&#x7F6E;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x901A;&#x8FC7;&#x626B;&#x63CF;org.macula.core.config&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x6240;&#x6709;Bean&#xFF0C;&#x5728;&#x66F4;&#x65B0;Configuration&#x4FE1;&#x606F;&#xFF0C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code class="lang-xml"> <span class="hljs-tag">&lt;<span class="hljs-title">context:component-scan</span> <span class="hljs-attribute">base-package</span>=<span class="hljs-value">&quot;org.macula.core.config&quot;</span> /&gt;</span>
</code></pre>
<p> <strong><em>&#x91CD;&#x8981;</em></strong></p>
<p> <em>&#x8BE5;&#x626B;&#x63CF;Configuraion&#x914D;&#x7F6E;&#x4FE1;&#x606F;Bean&#x7684;&#x914D;&#x7F6E;&#x4E0D;&#x5141;&#x8BB8;&#x4FEE;&#x6539;&#x3002;</em></p>
</li>
<li><p>configs/applicationContext-app.xml</p>
<p> &#x8BE5;&#x6587;&#x4EF6;&#x8BBE;&#x7F6E;&#x5E94;&#x7528;&#x6240;&#x9700;&#x8981;&#x5305;&#x542B;&#x7684;&#x5176;&#x4ED6;Spring&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x4EE5;&#x53CA;&#x5BF9;&#x7CFB;&#x7EDF;&#x6240;&#x6D89;&#x53CA;&#x5230;&#x7684;&#x516C;&#x5171;&#x4FE1;&#x606F;Bean&#x7684;&#x5B9A;&#x4E49;&#xFF0C;&#x5982;&#xFF1A;Jpa&#x5B9A;&#x4E49;&#x3001;Transaction&#x5B9A;&#x4E49;&#x7B49;&#xFF0C;&#x8BE5;&#x6587;&#x4EF6;&#x4E25;&#x7981;&#x5B9A;&#x4E49;&#x66F4;&#x4E3A;&#x590D;&#x6742;&#x7684;&#x6A21;&#x5757;&#x4FE1;&#x606F;&#x7684;Bean&#xFF0C;&#x5E94;&#x6709;import&#x65B9;&#x5F0F;&#x5BFC;&#x5165;&#x3002;</p>
<p> &#x5BF9;&#x4E8E;&#x5F15;&#x5165;&#x7684;&#x5B50;&#x6A21;&#x5757;&#x7684;Spring&#x4FE1;&#x606F;&#xFF0C;&#x5FC5;&#x987B;&#x5982;&#x4E0B;&#x5B9A;&#x4E49;&#xFF1A;</p>
<pre><code class="lang-xml"> <span class="hljs-tag">&lt;<span class="hljs-title">import</span> <span class="hljs-attribute">resource</span>=<span class="hljs-value">&quot;classpath*:/META-INF/spring/macula-*-app.xml&quot;</span> /&gt;</span>
</code></pre>
<p> &#x5373;&#x5BF9;&#x4E8E;&#x5B50;&#x6A21;&#x5757;&#x7684;Spring&#x4FE1;&#x606F;&#xFF0C;&#x5FC5;&#x987B;&#x653E;&#x7F6E;&#x5728;src/main/resources/META-INF/spring&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x5E76;&#x4E25;&#x683C;&#x6309;&#x7167;macula-*-app.xml&#x547D;&#x540D;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3002;</p>
</li>
<li><p>Sping MVC&#x5B9A;&#x4E49;</p>
<p> Spring MVC&#x5305;&#x62EC;web.xml&#x4E2D;&#x5BF9;Spring Filter&#x7684;&#x5B9A;&#x4E49;&#x4EE5;&#x53CA;&#x5BF9;&#x5E94;&#x7684;Spring&#x914D;&#x7F6E;&#x4FE1;&#x606F;&#x5B9A;&#x4E49;&#x3002;</p>
<p> &#x5728;web.xml&#x4E2D;&#x5B9A;&#x4E49;&#xFF1A;</p>
<pre><code class="lang-xml"> <span class="hljs-tag">&lt;<span class="hljs-title">servlet</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-title">servlet-name</span>&gt;</span>appServlet<span class="hljs-tag">&lt;/<span class="hljs-title">servlet-name</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-title">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-title">servlet-class</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-title">init-param</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-title">param-name</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">param-value</span>&gt;</span>classpath:/configs/servletContext-mvc.xml,classpath:/configs/servletContext-app.xml<span class="hljs-tag">&lt;/<span class="hljs-title">param-value</span>&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-title">init-param</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-title">load-on-startup</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">load-on-startup</span>&gt;</span>
 <span class="hljs-tag">&lt;/<span class="hljs-title">servlet</span>&gt;</span>

 <span class="hljs-tag">&lt;<span class="hljs-title">servlet-mapping</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-title">servlet-name</span>&gt;</span>appServlet<span class="hljs-tag">&lt;/<span class="hljs-title">servlet-name</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-title">url-pattern</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-title">url-pattern</span>&gt;</span>
 <span class="hljs-tag">&lt;/<span class="hljs-title">servlet-mapping</span>&gt;</span>
</code></pre>
<p> <strong><em>&#x91CD;&#x8981;</em></strong> </p>
<p> <em>&#x5E94;&#x7528;&#x5FC5;&#x987B;&#x4E25;&#x683C;&#x6309;&#x7167;&#x4E0A;&#x8FF0;&#x4EE3;&#x7801;&#x5B9A;&#x4E49;&#x3002;</em></p>
<p> &#x5728;configs/servletContext-mvc.xml&#x5B9A;&#x4E49;&#xFF1A;</p>
<pre><code class="lang-xml"> <span class="hljs-tag">&lt;<span class="hljs-title">import</span> <span class="hljs-attribute">resource</span>=<span class="hljs-value">&quot;classpath*:/META-INF/spring/macula-*-servlet.xml&quot;</span>&gt;</span>

 <span class="hljs-comment">&lt;!-- Enables the Spring MVC @Controller programming model --&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-title">mvc:annotation-driven</span> /&gt;</span>

 <span class="hljs-comment">&lt;!-- Forwards requests to the &quot;/&quot; resource to the &quot;welcome&quot; view --&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-title">mvc:view-controller</span> <span class="hljs-attribute">path</span>=<span class="hljs-value">&quot;/&quot;</span> <span class="hljs-attribute">view-name</span>=<span class="hljs-value">&quot;main&quot;</span> /&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-title">mvc:view-controller</span> <span class="hljs-attribute">path</span>=<span class="hljs-value">&quot;/admin&quot;</span> <span class="hljs-attribute">view-name</span>=<span class="hljs-value">&quot;admin/main&quot;</span> /&gt;</span>

 ...
</code></pre>
<p> <strong><em>&#x91CD;&#x8981;</em></strong></p>
<p> <em>&#x5E94;&#x7528;&#x4EE3;&#x7801;&#x5FC5;&#x987B;&#x4E25;&#x683C;&#x6309;&#x7167;&#x4E0A;&#x8FF0;&#x4EE3;&#x7801;&#x5B9A;&#x4E49;&#x3002;</em></p>
</li>
<li><p>configs/applicationContext-macula.xml</p>
<p> &#x8BE5;Spring&#x5B9A;&#x4E49;&#x4E3A;macula&#x5E73;&#x53F0;&#x7684;&#x76F8;&#x5173;&#x914D;&#x7F6E;&#x4FE1;&#x606F;&#xFF0C;&#x8BE5;&#x6587;&#x4EF6;&#x53EF;&#x4ECE;&#x5B9E;&#x4F8B;&#x4EE3;&#x7801;&#x4E2D;&#x62F7;&#x8D1D;&#xFF0C;&#x5E76;&#x4E0D;&#x5141;&#x8BB8;&#x4FEE;&#x6539;&#x3002;</p>
</li>
<li><p>&#x5B50;&#x6A21;&#x5757;Spring&#x914D;&#x7F6E;&#x4FE1;&#x606F;</p>
<p> &#x5B50;&#x6A21;&#x5757;Spring&#x914D;&#x7F6E;&#x4FE1;&#x606F;&#x5FC5;&#x987B;&#x653E;&#x7F6E;&#x5728;src/main/resources/META-INF/spring&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x5E76;&#x6309;&#x7167;macula-*-app.xml&#x5B9A;&#x4E49;&#xFF0C;&#x6BCF;&#x4E2A;&#x6A21;&#x5757;&#x53EF;&#x5B9A;&#x4E49;&#x591A;&#x4E2A;Spring&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x3002;&#x4F46;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x4E0D;&#x8981;&#x4E0E;&#x5176;&#x4ED6;&#x6A21;&#x5757;&#x547D;&#x540D;&#x76F8;&#x540C;&#x3002;   </p>
</li>
</ol>
<h3 id="jpa&#x914D;&#x7F6E;">JPA&#x914D;&#x7F6E;</h3>
<p>&#x5728;Macula&#x5E73;&#x53F0;&#x4E2D;&#xFF0C;&#x5BF9;&#x6570;&#x636E;&#x5B58;&#x53D6;&#x7684;&#x8BBF;&#x95EE;&#x8981;&#x6C42;&#x91C7;&#x7528;&#x7B26;&#x5408;J2EE&#x6807;&#x51C6;&#x7684;JPA&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x4F7F;&#x7528;JPA&#x7684;Hibernate&#x5B9E;&#x73B0;&#x3002;</p>
<ol>
<li><p>JPA&#x7684;persistence.xml&#x6587;&#x4EF6;&#x914D;&#x7F6E;</p>
<p> &#x5728;&#x57FA;&#x4E8E;macula&#x7684;&#x9879;&#x76EE;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x4E0D;&#x9700;&#x8981;&#x914D;&#x7F6E;persistence.xml&#x6587;&#x4EF6;</p>
</li>
<li><p>JPA&#x4E2D;Spring&#x7684;&#x914D;&#x7F6E;</p>
<p> &#x5E94;&#x7528;&#x53EF;&#x521B;&#x5EFA;&#x591A;&#x4E2A;JPA&#x7684;EntityManagerFactory&#xFF0C;&#x4F46;&#x8981;&#x6C42;macula&#x5E73;&#x53F0;&#x81EA;&#x8EAB;&#x63D2;&#x4EF6;&#x6240;&#x9700;&#x8981;&#x7684;entityManagerFactory&#x5FC5;&#x987B;&#x5DF2;&#x5728;Spring&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x914D;&#x7F6E;&#xFF08;&#x914D;&#x7F6E;&#x5728;configs/applicationContext-app.xml&#xFF09;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x5E76;&#x914D;&#x7F6E;&#x4E86;&#x76F8;&#x5E94;&#x7684;Transaction&#x5904;&#x7406;&#x3002;</p>
<pre><code class="lang-xml"> <span class="hljs-comment">&lt;!-- App Entity Manager --&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">&quot;entityManagerFactory_macula&quot;</span> <span class="hljs-attribute">parent</span>=<span class="hljs-value">&quot;abstractEntityManagerFactory&quot;</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&quot;persistenceUnitManager&quot;</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">&quot;org.springframework.orm.jpa.persistenceunit.DefaultPersistenceUnitManager&quot;</span>&gt;</span>
             <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&quot;defaultPersistenceUnitName&quot;</span>&gt;</span>
                 <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>macula<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
             <span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>
             <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&quot;defaultDataSource&quot;</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">&quot;macula_dataSource&quot;</span> /&gt;</span>
             <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&quot;packagesToScan&quot;</span>&gt;</span>
                 <span class="hljs-tag">&lt;<span class="hljs-title">array</span>&gt;</span>
                     <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>org.macula.base.app.domain<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
                     <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>org.macula.base.security.domain<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
                     <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>org.macula.base.data.domain<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
                 <span class="hljs-tag">&lt;/<span class="hljs-title">array</span>&gt;</span>
             <span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>
         <span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>
 <span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span>

 <span class="hljs-comment">&lt;!-- @Transaction --&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-title">tx:advice</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">&quot;maculaTxAdvise&quot;</span> <span class="hljs-attribute">transaction-manager</span>=<span class="hljs-value">&quot;transactionManager_macula&quot;</span> /&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-title">aop:config</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-title">aop:pointcut</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">&quot;maculaPointcut&quot;</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">&quot;execution(* org.macula..*.*(..)) and execution(!* org.macula.samples..*.*(..)) and @within(org.springframework.stereotype.Service)&quot;</span> /&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-title">aop:advisor</span> <span class="hljs-attribute">advice-ref</span>=<span class="hljs-value">&quot;maculaTxAdvise&quot;</span> <span class="hljs-attribute">pointcut-ref</span>=<span class="hljs-value">&quot;maculaPointcut&quot;</span> /&gt;</span>
 <span class="hljs-tag">&lt;/<span class="hljs-title">aop:config</span>&gt;</span>
</code></pre>
<p><strong><em>&#x91CD;&#x8981;</em></strong></p>
<p> <em>&#x5728;&#x4E0A;&#x8FF0;&#x914D;&#x7F6E;&#x4E2D;&#xFF0C;entityManagerFactory_macula&#x548C;transactionManager_macula&#x547D;&#x540D;&#x4E0D;&#x80FD;&#x4FEE;&#x6539;&#xFF0C;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5F3A;&#x70C8;&#x5EFA;&#x8BAE;&#x60A8;&#x6309;&#x7167;&#x4E0A;&#x8FF0;&#x4EE3;&#x7801;&#x914D;&#x7F6E;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x505A;&#x51FA;&#x4FEE;&#x6539;&#x3002;&#x5BF9;&#x4E8E;&#x4E1A;&#x52A1;&#x6A21;&#x5757;&#x6765;&#x8BF4;&#xFF0C;&#x4F7F;&#x7528;&#x7684;&#x6570;&#x636E;&#x5E93;&#x901A;&#x5E38;&#x4E0E;macula&#x81EA;&#x8EAB;&#x7684;&#x6570;&#x636E;&#x5E93;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x8FD9;&#x5C31;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x6570;&#x636E;&#x6E90;&#x3001;entityManagerFactory&#x4EE5;&#x53CA;transactionManager&#x3002;&#x4E3A;&#x4E86;&#x964D;&#x4F4E;&#x7CFB;&#x7EDF;&#x6574;&#x4F53;&#x7684;&#x590D;&#x6742;&#x5EA6;&#xFF0C;&#x5728;&#x540C;&#x4E00;&#x4E2A;Request/Response&#x5468;&#x671F;&#x4E2D;&#xFF0C;&#x5C3D;&#x91CF;&#x4E0D;&#x8981;&#x4F7F;&#x7528;&#x591A;&#x4E2A;transactionManager&#x3002;</em></p>
</li>
<li><p>JPA&#x90E8;&#x5206;&#x53C2;&#x6570;&#x8BBE;&#x7F6E;</p>
<p> &#x5728;JPA&#x7684;&#x8FD0;&#x884C;&#x4E2D;&#x6709;&#x591A;&#x4E2A;&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x914D;&#x7F6E;&#xFF0C;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x91C7;&#x7528;&#x7684;Hibernate&#x7684;JPA&#x5B9E;&#x73B0;&#xFF0C;&#x90A3;&#x4E48;Hibernate&#x4E2D;&#x53EF;&#x7528;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x914D;&#x7F6E;&#x5728;EntityManagerFactoryBean&#x7684;&#x914D;&#x7F6E;&#x4E2D;&#xFF0C;&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x4ECB;&#x7ECD;2&#x4E2A;&#x6709;&#x7528;&#x7684;&#x914D;&#x7F6E;&#xFF1A;</p>
<ul>
<li>showSql&#xFF1A;&#x662F;&#x5426;&#x8F93;&#x51FA;SQL&#x8BED;&#x53E5;</li>
<li><p>generateDdl&#xFF1A;&#x662F;&#x5426;&#x8F93;&#x51FA;&#x5EFA;&#x8868;&#x8BED;&#x53E5;&#xFF08;&#x66F4;&#x65B0;&#x8868;&#x7ED3;&#x6784;&#x8BED;&#x53E5;&#xFF09;</p>
<p><strong><em>&#x91CD;&#x8981;</em></strong></p>
<p><em>&#x4E0A;&#x9762;2&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x9ED8;&#x8BA4;&#x7684;applicationContext-app.xml&#x4E2D;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x5C06;&#x4F1A;&#x8BFB;&#x53D6;macula&#x6846;&#x67B6;&#x7684;Configuration&#x914D;&#x7F6E;&#x7684;&#x53C2;&#x6570;&#x503C;&#x8FDB;&#x884C;&#x8BBE;&#x5B9A;&#x3002;</em>    </p>
</li>
</ul>
</li>
</ol>
<h3 id="freemarker&#x914D;&#x7F6E;">Freemarker&#x914D;&#x7F6E;</h3>
<p>&#x5728;Macula&#x5E73;&#x53F0;&#x4E2D;&#xFF0C;Freemarker&#x4F5C;&#x4E3A;&#x754C;&#x9762;&#x663E;&#x793A;&#x5C42;&#x7684;&#x91CD;&#x8981;&#x7EC4;&#x6210;&#x90E8;&#x5206;&#xFF0C;&#x5728;&#x754C;&#x9762;&#x7684;&#x663E;&#x793A;&#x4E0A;&#xFF0C;&#x5747;&#x53EF;&#x91C7;&#x7528;Freemarker&#x6A21;&#x677F;&#x4F5C;&#x4E3A;&#x663E;&#x793A;&#x754C;&#x9762;&#x3002;&#x5BF9;&#x4E8E;Freemarker&#x7684;&#x8BBE;&#x7F6E;&#xFF0C;&#x4E3B;&#x8981;&#x6709;2&#x4E2A;&#x90E8;&#x5206;&#xFF1A;</p>
<ul>
<li><p>freemarker.properties</p>
<p>  &#x8BE5;&#x6587;&#x4EF6;&#x4F4D;&#x4E8E;war&#x6A21;&#x5757;&#x7684;resources&#x6839;&#x76EE;&#x5F55;&#xFF0C;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x5305;&#x62EC;&#x4E86;&#x53EF;&#x914D;&#x7F6E;&#x7684;Freemarker&#x7684;&#x5C5E;&#x6027;&#x3002;&#xFF08;&#x5177;&#x4F53;&#x7684;&#x53EF;&#x914D;&#x7F6E;&#x5C5E;&#x6027;&#xFF0C;&#x8BF7;&#x53C2;&#x8003;Freemarker&#x6587;&#x6863;&#xFF09;</p>
<p>  freemarker.properties&#x6587;&#x4EF6;&#x5728;&#x6F14;&#x793A;&#x7684;&#x6A21;&#x5757;&#x4E2D;&#xFF0C;&#x5B9A;&#x4E49;&#x4E86;&#xFF1A;</p>
<pre><code>  auto_import=&quot;/spring.ftl&quot; as spring, &quot;/macula.ftl&quot; as macula, &quot;/layout.ftl&quot; as layout
</code></pre><p>  &#x5373;&#x53EF;&#x4EE5;&#x8F7D;&#x5165;spring.ftl&#xFF0C;macula.ftl&#xFF0C;layout.ftl&#x4E09;&#x4E2A;freemarker macro&#xFF0C;&#x8FD9;&#x6837;&#xFF0C;&#x5728;&#x5176;&#x4ED6;freemarker&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x5B83;&#x4EEC;&#x5B9A;&#x4E49;&#x7684;&#x5B8F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x4EE5;&#x4E0D;&#x7528;&#x518D;&#x5728;&#x6A21;&#x5757;&#x4E2D;&#x58F0;&#x660E;&#x5BFC;&#x5165;&#xFF0C;freemarker&#x7BA1;&#x7406;&#x5668;&#x53EF;&#x81EA;&#x52A8;&#x5BFC;&#x5165;&#x8FD9;&#x4E09;&#x4E2A;&#x5B8F;&#x5E76;&#x6309;&#x6307;&#x5B9A;&#x7684;&#x522B;&#x540D;&#x4F7F;&#x7528;&#x3002;</p>
</li>
<li><p>Spring View&#x4E2D;&#x7684;&#x8BBE;&#x7F6E;</p>
<pre><code class="lang-xml">  <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">&quot;freemarkerConfig&quot;</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">&quot;org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer&quot;</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- preferFileSystemAccess can make hot file detection, use true for development --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&quot;preferFileSystemAccess&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;false&quot;</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&quot;templateLoaderPaths&quot;</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">list</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>classpath:views/<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">list</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&quot;freemarkerSettings&quot;</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">util:properties</span> <span class="hljs-attribute">location</span>=<span class="hljs-value">&quot;classpath:freemarker.properties&quot;</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&quot;freemarkerVariables&quot;</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">map</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">entry</span> <span class="hljs-attribute">key</span>=<span class="hljs-value">&quot;appVersion&quot;</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>#{T(org.macula.Configuration).getAppVersion()}<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-title">entry</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">map</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span>
</code></pre>
<p>  &#x901A;&#x8FC7;&#x4E0A;&#x8FF0;&#x914D;&#x7F6E;&#x53EF;&#x770B;&#x51FA;&#xFF0C;&#x9664;&#x4E86;freemarker.properties&#x7684;&#x914D;&#x7F6E;&#x5916;&#xFF0C;&#x4E3B;&#x8981;&#x5B9A;&#x4E49;&#x4E86;Freemarker&#x6700;&#x7EC8;&#x6A21;&#x677F;&#x7684;&#x8BBF;&#x95EE;&#x8DEF;&#x5F84;&#x4E3A;&#x57FA;&#x4E8E;classpath:views/&#x7684;&#x8DEF;&#x5F84;&#x8BBF;&#x95EE;&#xFF0C;&#x7531;&#x4E8E;&#x8BE5;&#x8DEF;&#x5F84;&#x662F;&#x4E00;&#x4E2A;classpath&#x8DEF;&#x5F84;&#xFF0C;&#x6240;&#x4EE5;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x5728;&#x6240;&#x6709;&#x7684;&#x4E1A;&#x52A1;&#x6A21;&#x5757;&#xFF08;&#x5305;&#x62EC;war&#x6A21;&#x5757;&#x548C;jar&#x6A21;&#x5757;&#xFF09;&#x4E2D;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x7F16;&#x5199;freemarker&#x6587;&#x6863;&#xFF0C;&#x5E76;&#x80FD;&#x5728;&#x90E8;&#x7F72;&#x540E;&#x6B63;&#x5E38;&#x8BBF;&#x95EE;&#x3002;</p>
<p>  &#x540C;&#x6837;&#xFF0C;&#x8FD9;&#x91CC;&#x5B9A;&#x4E49;&#x7684;&#x4E00;&#x4E2A;&#x4E3B;&#x8981;&#x5C5E;&#x6027;&#x662F;preferFileSystemAccess&#x5C5E;&#x6027;&#xFF0C;&#x8BE5;&#x5C5E;&#x6027;&#x6807;&#x8BC6;&#x662F;&#x5426;&#x91C7;&#x7528;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x52A0;&#x8F7D;&#x7684;&#x65B9;&#x5F0F;&#x52A0;&#x8F7D;freemarker&#x6A21;&#x7248;&#xFF0C;&#x5728;&#x5F00;&#x53D1;&#x6A21;&#x5F0F;&#x4E0B;&#x53EF;&#x8BBE;&#x7F6E;&#x4E3A;true&#xFF0C;&#x5B83;&#x6807;&#x8BC6;&#x80FD;&#x4FA6;&#x67E5;&#x5230;&#x6587;&#x4EF6;&#x7684;&#x53D8;&#x5316;&#xFF0C;&#x5E76;&#x81EA;&#x52A8;&#x91CD;&#x65B0;&#x52A0;&#x8F7D;&#x6A21;&#x677F;&#x3002; </p>
</li>
</ul>
<h3 id="log4j&#x914D;&#x7F6E;">Log4j&#x914D;&#x7F6E;</h3>
<p>&#x4F5C;&#x4E3A;&#x90FD;&#x5DF2;&#x6811;&#x679D;&#x7684;log4j&#x914D;&#x7F6E;&#x6587;&#x4EF6;log4j.properties&#x6587;&#x4EF6;&#xFF0C;&#x4F46;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x8BF4;&#x660E;&#x7684;&#x662F;&#xFF0C;&#x5728;&#x7A0B;&#x5E8F;&#x4E2D;&#x5F15;&#x5165;log&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x5F15;&#x5165;&#x7684;&#x662F;org.slf4j&#x5305;&#x3002;</p>
<p>log4j.properties&#x6587;&#x4EF6;&#x53EF;&#x5728;&#x5F00;&#x53D1;&#x548C;&#x751F;&#x4EA7;&#x4E24;&#x4E2A;&#x73AF;&#x5883;&#x4E0B;&#xFF0C;&#x4F7F;&#x7528;&#x4E0D;&#x540C;&#x7684;&#x65E5;&#x5FD7;&#x8F93;&#x51FA;&#x7EA7;&#x522B;&#x914D;&#x7F6E;&#xFF0C;&#x4EE5;&#x8FBE;&#x5230;&#x4E0D;&#x540C;&#x7684;&#x9700;&#x6C42;&#x7684;&#x76EE;&#x7684;&#x3002;</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../chapter2/chapter2.html" class="navigation navigation-prev " aria-label="Previous page: 核心技术"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../chapter2/02_Domain.html" class="navigation navigation-next " aria-label="Next page: 领域模型层"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
